function wpresidence_admin_submit_initialize(){"use strict";if(1===parseInt(admin_google_vars.wpresidence_map_type)){var e=new google.maps.LatLng(admin_google_vars.general_latitude,admin_google_vars.general_longitude),t={flat:!1,noClear:!1,zoom:17,scrollwheel:!1,draggable:!0,center:e,mapTypeId:google.maps.MapTypeId.ROADMAP};map=new google.maps.Map(document.getElementById("googleMap"),t),google.maps.visualRefresh=!0;var a=new google.maps.Marker({position:e});a.setMap(map),gmarkers.push(a),google.maps.event.addListener(map,"click",function(e){wpestate_placeMarker(e.latLng),google.maps.visualRefresh=!0}),map.setCenter(e)}else if(2===parseInt(admin_google_vars.wpresidence_map_type)){var r=L.latLng(admin_google_vars.general_latitude,admin_google_vars.general_longitude);map=L.map("googleMap",{center:r,zoom:15});var n=wpresidence_open_stret_tile_details_admin();map.addLayer(n),map.on("click",function(e){map.removeLayer(propertyMarker_submit);L.latLng(e.latlng);propertyMarker_submit=L.marker(e.latlng).addTo(map),propertyMarker_submit.bindPopup('<div class="submit_leaflet_admin">Latitude: '+e.latlng.lat+" Longitude: "+e.latlng.lng+"</div>").openPopup(),jQuery("#property_latitude").val(e.latlng.lat),jQuery("#property_longitude").val(e.latlng.lng),jQuery("#agency_lat").val(e.latlng.lat),jQuery("#agency_long").val(e.latlng.lng),jQuery("#developer_lat").val(e.latlng.lat),jQuery("#developer_long").val(e.latlng.lng),jQuery("#term_latitude").val(e.latlng.lat),jQuery("#term_longitude").val(e.latlng.lng)});var o=L.latLng(r);propertyMarker_submit=L.marker(o).addTo(map),propertyMarker_submit.bindPopup('<div class="submit_leaflet_admin">Latitude: '+admin_google_vars.general_latitude+" Longitude: "+admin_google_vars.general_longitude+"</div>"),jQuery("#property_map_trigger").on("click",function(){setTimeout(function(){map.invalidateSize()},600),setTimeout(function(){propertyMarker_submit.openPopup()},600)})}}function wpresidence_open_stret_tile_details_admin(){if(""===admin_google_vars.wp_estate_mapbox_api_key)var e=L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'});else e=L.tileLayer("https://api.mapbox.com/styles/v1/mapbox/streets-v11/tiles/256/{z}/{x}/{y}?access_token="+admin_google_vars.wp_estate_mapbox_api_key,{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',maxZoom:18,id:"mapbox.streets",accessToken:"your.mapbox.access.token"});return e}function wpestate_placeMarker(e){"use strict";wpestate_removeMarkersadmin();var t,a=new google.maps.Marker({position:e,map:map});gmarkers.push(a);var r=new google.maps.InfoWindow({content:"Latitude: "+e.lat()+"<br>Longitude: "+e.lng()});r.open(map,a),t=document.getElementById("property_latitude"),null!==t&&(document.getElementById("property_latitude").value=e.lat(),document.getElementById("property_longitude").value=e.lng()),t=document.getElementById("agency_lat"),null!==t&&(document.getElementById("agency_lat").value=e.lat(),document.getElementById("agency_long").value=e.lng()),t=document.getElementById("developer_lat"),null!==t&&(document.getElementById("developer_lat").value=e.lat(),document.getElementById("developer_long").value=e.lng()),jQuery("#term_latitude").val(e.lat()),jQuery("#term_longitude").val(e.lng())}function wpestate_removeMarkersadmin(){"use strict";for(var e=0;e<gmarkers.length;e++)gmarkers[e].setMap(null)}function wpestate_admin_codeAddress(){"use strict";var e,t,a,r,n="",o="";if(jQuery("#property_address").length>0){n=document.getElementById("property_address").value;var l=jQuery("#property_city-all input:checked").parent();t=l.text(),l=jQuery("#property_county_state-all input:checked").parent(),e=l.text();var p=document.getElementById("property_country").value}else if(jQuery("#developer_address").length>0){n=document.getElementById("developer_address").value;l=jQuery("#property_city_developer-all input:checked").parent();t=l.text(),l=jQuery("#property_county_state_developer-all input:checked").parent(),e=l.text();p=""}else if(jQuery("#agency_address").length>0){n=document.getElementById("agency_address").value;l=jQuery("#city_agency-all input:checked").parent();t=l.text(),l=jQuery("#county_state_agency-all input:checked").parent(),e=l.text();p=""}else if(jQuery("#term_address").length>0){n=document.getElementById("term_address").value,t=document.getElementById("term_zip").value;p=document.getElementById("property_country").value}var i=n;if(t&&(i=i+","+t),e&&(i=i+","+e),p&&(i=i+","+p),o=n+" "+t+" "+p,1==parseInt(admin_google_vars.geolocation_type))geocoder=new google.maps.Geocoder,geocoder.geocode({address:i},function(e,t){t==google.maps.GeocoderStatus.OK?(a=e[0].geometry.location.lat(),r=e[0].geometry.location.lng(),wpresidence_internalmap_set_postion(a,r)):alert(admin_google_vars.geo_fails+t)});else if(2==parseInt(admin_google_vars.geolocation_type))jQuery.get("https://nominatim.openstreetmap.org/search",{format:"json",addressdetails:"1",q:o}).done(function(e){void 0!==e[0]?(a=e[0].lat,r=e[0].lon,wpresidence_internalmap_set_postion(a,r)):alert(admin_google_vars.geo_fails+status)}).fail(function(){}).always(function(){})}function wpresidence_internalmap_set_postion(e,t){if(wpestate_removeMarkersadmin(),1===parseInt(admin_google_vars.wpresidence_map_type)){var a=new google.maps.LatLng(e,t);map.setCenter(a);var r=new google.maps.Marker({map:map,position:a});gmarkers.push(r);var n=new google.maps.InfoWindow({content:"Latitude: "+e+"<br>Longitude: "+t});n.open(map,r)}else if(2===parseInt(admin_google_vars.wpresidence_map_type)){map.removeLayer(propertyMarker_submit);var o=L.latLng(e,t),l=L.latLng(o);propertyMarker_submit=L.marker(l).addTo(map),propertyMarker_submit.bindPopup('<div class="submit_leaflet_admin">Latitude: '+e+" Longitude: "+t+"</div>").openPopup(),map.panTo(new L.LatLng(e,t))}jQuery("#property_latitude").val(e),jQuery("#property_longitude").val(t),jQuery("#developer_lat").val(e),jQuery("#developer_long").val(t),jQuery("#agency_lat").val(e),jQuery("#agency_long").val(t),jQuery("#term_latitude").val(e),jQuery("#term_longitude").val(t)}var geocoder,propertyMarker_submit,map="",selected_city="",gmarkers=[];jQuery(document).ready(function(e){"use strict";wpresidence_admin_submit_initialize();var t=document.getElementById("property_map_trigger");null!==t&&jQuery("#property_map_trigger").on("click",function(){1===parseInt(admin_google_vars.wpresidence_map_type)&&google.maps.event.trigger(map,"resize")})}),jQuery("#admin_place_pin").on("click",function(e){"use strict";e.preventDefault(),wpestate_admin_codeAddress()}),jQuery("#property_citychecklist label").on("click",function(e){"use strict";selected_city=jQuery(this).text()});