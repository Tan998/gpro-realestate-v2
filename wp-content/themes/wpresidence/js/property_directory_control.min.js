let sliderTimerScroll;const sliderAjaxDelayScroll=400;let sliderTimer,with_clear=1;function wpresidence_directory_increase_pagination(){const e=jQuery("#property_dir_pagination");let r=parseInt(e.val(),10);e.val(++r),wpestate_directory_filtering()}jQuery(document).ready((function(){const e=jQuery("#directory_load_more");e.data("default-text",e.text()),e.on("click",(function(e){0===parseInt(jQuery("#property_dir_done").val(),10)&&(with_clear=0,wpresidence_directory_increase_pagination())})),wpresidence_directory_initializeSliders(),jQuery('.extended_search_check_wrapper_directory input[type="checkbox"]').on("click",wpestate_directory_filtering),jQuery(".listing_filters_head_directory li, .directory_sidebar li").on("click",(function(){const e=jQuery(this).text(),r=jQuery(this).attr("data-value"),t=jQuery(this).parent().parent();t.find(".filter_menu_trigger").text(e).append('<span class="caret caret_filter"></span>').attr("data-value",r),t.find("input:hidden").val(r),wpestate_directory_filtering()})),jQuery("#property_status, #property_keyword").on("change",wpestate_directory_filtering)}));const sliderAjaxDelay=500;function wpestate_directory_filtering(){sliderTimer&&clearTimeout(sliderTimer),filter_container=jQuery(".directory_sidebar_wrapper"),cards_container=jQuery("#listing_ajax_container"),do_clear_container=parseInt(with_clear,10),sliderTimer=setTimeout(function(){wpresidence_universal_query_filtering_action(filter_container,cards_container,do_clear_container)},sliderAjaxDelay)}function wpresidence_directory_filtering_action(){with_clear=parseInt(with_clear,10),1===with_clear&&(jQuery("#property_dir_pagination").val("1"),wpresidence_directory_updateLoadMoreButton(!1));const e=ajaxcalls_vars.admin_url+"admin-ajax.php",r=wpresidence_directory_getFilterData();1===with_clear?wpestate_createSkeletons(jQuery("#listing_ajax_container")):wpestate_createSkeletons(jQuery("#listing_ajax_container"),"true"),jQuery(".pagination_nojax").hide();const t=jQuery("#wpestate_ajax_filtering").val();jQuery.ajax({type:"POST",url:e,dataType:"json",data:{action:"wpestate_classic_ondemand_directory",...r,security:t},success:function(e){wpresidence_directory_handleAjaxSuccess(e)},error:function(e){jQuery(".skeleton-placeholder").remove(),jQuery("#listing_loader").hide(),console.error("AJAX error:",e)}}),with_clear=1}function wpresidence_directory_initializeSliders(){[{id:"#slider_price_widget",change:wpestate_directory_filtering},{id:"#slider_property_size_widget",config:wpresidence_directory_getSizeSliderConfig()},{id:"#slider_property_lot_size_widget",config:wpresidence_directory_getLotSizeSliderConfig()},{id:"#slider_property_rooms_widget",config:wpresidence_directory_getRoomsSliderConfig("rooms")},{id:"#slider_property_bedrooms_widget",config:wpresidence_directory_getRoomsSliderConfig("bedrooms")},{id:"#slider_property_bathrooms_widget",config:wpresidence_directory_getRoomsSliderConfig("bathrooms")}].forEach((e=>{e.change?jQuery(e.id).slider({change:e.change}):jQuery(e.id).slider(e.config)}))}function wpresidence_directory_getSizeSliderConfig(){return{range:!0,min:parseFloat(directory_vars.dir_min_size),max:parseFloat(directory_vars.dir_max_size),values:[directory_vars.dir_min_size,directory_vars.dir_max_size],slide:function(e,r){jQuery("#property_size_low").val(r.values[0]),jQuery("#property_size_max").val(r.values[1]),jQuery("#property_size").html(r.values[0]+" "+directory_vars.measures_sys+" "+control_vars.to+" "+r.values[1]+" "+directory_vars.measures_sys),wpestate_directory_filtering()}}}function wpresidence_directory_getLotSizeSliderConfig(){return{range:!0,min:parseFloat(directory_vars.dir_min_lot_size),max:parseFloat(directory_vars.dir_max_lot_size),values:[directory_vars.dir_min_lot_size,directory_vars.dir_max_lot_size],slide:function(e,r){jQuery("#property_lot_size_low").val(r.values[0]),jQuery("#property_lot_size_max").val(r.values[1]),jQuery("#property_lot_size").html(r.values[0]+" "+directory_vars.measures_sys+" "+control_vars.to+" "+r.values[1]+" "+directory_vars.measures_sys),wpestate_directory_filtering()}}}function wpresidence_directory_getRoomsSliderConfig(e){return{range:!0,min:parseFloat(directory_vars[`dir_${e}_min`]),max:parseFloat(directory_vars[`dir_${e}_max`]),values:[directory_vars[`dir_${e}_min`],directory_vars[`dir_${e}_max`]],slide:function(r,t){jQuery(`#property_${e}_low`).val(t.values[0]),jQuery(`#property_${e}_max`).val(t.values[1]),jQuery(`#property_${e}`).text(t.values[0]+" "+control_vars.to+" "+t.values[1]),wpestate_directory_filtering()}}}function wpresidence_directory_getFilterData(){return{action_values:jQuery("#sidebar-adv_actions").attr("data-value"),category_values:jQuery("#sidebar-adv_categ").attr("data-value"),city:jQuery("#sidebar-advanced_city").attr("data-value"),area:jQuery("#sidebar-adv_area").attr("data-value"),county:jQuery("#sidebar-adv_conty").attr("data-value"),price_low:parseFloat(jQuery("#price_low_widget").val(),10),price_max:parseFloat(jQuery("#price_max_widget").val(),10),postid:directory_vars.post_id,min_size:parseFloat(jQuery("#property_size_low").val(),10),max_size:parseFloat(jQuery("#property_size_max").val(),10),min_lot_size:parseFloat(jQuery("#property_lot_size_low").val(),10),max_lot_size:parseFloat(jQuery("#property_lot_size_max").val(),10),min_rooms:parseFloat(jQuery("#property_rooms_low").val(),10),max_rooms:parseFloat(jQuery("#property_rooms_max").val(),10),min_bedrooms:parseFloat(jQuery("#property_bedrooms_low").val(),10),max_bedrooms:parseFloat(jQuery("#property_bedrooms_max").val(),10),min_bathrooms:parseFloat(jQuery("#property_bathrooms_low").val(),10),max_bathrooms:parseFloat(jQuery("#property_bathrooms_max").val(),10),status:jQuery("#property_status").val(),keyword:jQuery("#property_keyword").val(),order:jQuery("#a_filter_order_directory").attr("data-value"),pagination:jQuery("#property_dir_pagination").val(),all_checkers:wpresidence_directory_getCheckedFilters()}}function wpresidence_directory_getCheckedFilters(){return jQuery('.extended_search_check_wrapper_directory input[type="checkbox"]:checked').map((function(){return jQuery(this).attr("name-title")})).get().join(",")}function wpresidence_directory_handleAjaxSuccess(e){const r=parseInt(e.no_results,10),t=parseInt(jQuery("#property_dir_per_page").val(),10),a=jQuery("#listing_ajax_container");wpestate_replaceSkeletons(a,e.cards);wpresidence_directory_updateLoadMoreButton(r<t||a.find(".no_results").length),jQuery("#listing_loader").hide(),wpestate_restart_js_after_ajax()}function wpresidence_directory_updateLoadMoreButton(e){const r=jQuery("#directory_load_more"),t=r.data("default-text")||r.text();e?(jQuery("#property_dir_done").val("1"),r.text(directory_vars.no_more).addClass("no_more_list")):(jQuery("#property_dir_done").val("0"),r.text(t).removeClass("no_more_list"))}function wpresidence_universal_query_filtering_action(e,r,t){1===(t=parseInt(t,10))&&(e.find("#property_dir_pagination").val("1"),wpresidence_directory_updateLoadMoreButton(!1));const a=ajaxcalls_vars.admin_url+"admin-ajax.php",i=wpresidence_universal_getFilterData(e);const n=jQuery(".wpresidence_wrap_a_filter_order_directory #a_filter_order_directory");n.length&&void 0!==n.attr("data-value")&&(i.order=n.attr("data-value"));1===t?wpestate_createSkeletons(r):wpestate_createSkeletons(r,"true"),jQuery(".pagination_nojax").hide();const o=jQuery("#wpestate_ajax_filtering").val();jQuery.ajax({type:"POST",url:a,dataType:"json",data:{action:"wpestate_classic_ondemand_directory",...i,security:o},success:function(e){wpresidence_directory_handleAjaxSuccess(e)},error:function(e){jQuery(".skeleton-placeholder").remove(),jQuery("#listing_loader").hide(),console.error("AJAX error:",e)}}),with_clear=1}function wpresidence_universal_getFilterData(e){return{action_values:e.find("#sidebar-adv_actions").attr("data-value"),category_values:e.find("#sidebar-adv_categ").attr("data-value"),city_values:e.find("#sidebar-advanced_city").attr("data-value"),area_values:e.find("#sidebar-adv_area").attr("data-value"),county_values:e.find("#sidebar-adv_conty").attr("data-value"),price_low:parseFloat(e.find("#price_low_widget").val(),10),price_max:parseFloat(e.find("#price_max_widget").val(),10),postID:directory_vars.post_id,min_size:parseFloat(e.find("#property_size_low").val(),10),max_size:parseFloat(e.find("#property_size_max").val(),10),min_lot_size:parseFloat(e.find("#property_lot_size_low").val(),10),max_lot_size:parseFloat(e.find("#property_lot_size_max").val(),10),min_rooms:parseFloat(e.find("#property_rooms_low").val(),10),max_rooms:parseFloat(e.find("#property_rooms_max").val(),10),min_bedrooms:parseFloat(e.find("#property_bedrooms_low").val(),10),max_bedrooms:parseFloat(e.find("#property_bedrooms_max").val(),10),min_bathrooms:parseFloat(e.find("#property_bathrooms_low").val(),10),max_bathrooms:parseFloat(e.find("#property_bathrooms_max").val(),10),status:e.find("#property_status").val(),keyword:e.find("#property_keyword").val(),order:e.find("#a_filter_order_directory").attr("data-value"),pagination:e.find("#property_dir_pagination").val(),all_checkers:wpresidence_directory_getCheckedFilters(e)}}function wpresidence_universal_getCheckedFilters(e){return e.find('.extended_search_check_wrapper_directory input[type="checkbox"]:checked').map((function(){return jQuery(this).attr("name-title")})).get().join(",")}function wpresidence_ajax_universal_handleAjaxSuccess(e,r,t){const a=parseInt(t.no_results,10),i=parseInt(jQuery("#property_dir_per_page").val(),10);0!==a?wpestate_replaceSkeletons(r,t.cards):jQuery(".skeleton-placeholder").remove();wpresidence_directory_updateLoadMoreButton(a<i||0===a),wpestate_restart_js_after_ajax()}